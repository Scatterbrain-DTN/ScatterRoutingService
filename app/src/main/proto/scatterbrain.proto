syntax = "proto3";
option java_package = "com.example.uscatterbrain";
option java_outer_classname = "ScatterProto";

message Advertise {
    enum provides {
        BLUETOOTHCLASSIC = 0;
        BLE = 1;
        WIFIP2P = 2;
        ULTRASOUND = 4;
    }
}

message BlockData {
    fixed64 from_low = 1;
    fixed64 from_high = 2;
    fixed64 to_low = 3;
    fixed64 to_high = 4;
    string application = 5;
    uint32 sessionid = 6;
    bool todisk = 7;
    repeated bytes nexthashes = 8; //size of this is fragment count
    bytes sig = 9;
}

message BlockSequence {
    uint32 seqnum = 1;
    bytes data = 2;
}

message Upgrade {
    Advertise.provides provides = 1;
    uint32 sessionid = 2;
}

message Identity {
    fixed64 uuid_low = 1;
    fixed64 uuid_high = 2;
    string givenname = 3;
    bytes pubkey = 4;
    bytes sig = 5;
}